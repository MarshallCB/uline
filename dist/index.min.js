!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).uline={})}(this,(function(e){"use strict";const{replace:t}="",n=/[&<>'"]/g,s={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},r=e=>s[e],i=e=>t.call(e,n,r),o=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,a=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i,c=/<[a-z][^>]+$/i,u=/>[^<>]*$/,l=/<([a-z]+[a-z0-9:._-]*)([^>]*?)(\/>)/gi,p=/\s+$/,f=(e,t)=>0<t--&&(c.test(e[t])||!u.test(e[t])&&f(e,t)),$=(e,t,n)=>a.test(t)?e:`<${t}${n.replace(p,"")}></${t}>`,{toString:g}=Function,{assign:h,keys:b}=Object,d="isÂµ"+Date.now(),m=new RegExp(`(\x3c!--${d}(\\d+)--\x3e|\\s*${d}(\\d+)=('|")([^\\4]+?)\\4)`,"g"),w=(e,t,n)=>` ${e}=${t}${i(n)}${t}`,y=e=>{switch(typeof e){case"string":return i(e);case"boolean":case"number":return String(e);case"object":switch(!0){case e instanceof Array:return e.map(y).join("");case e&&e.is_uline:return e.toString()}}return null==e?"":i(String(e))};function k(e){const t=i(this[e]);return"role"===e?` role="${t}"`:` aria-${e.toLowerCase()}="${t}"`}function j(e){return` data-${t=e,t.replace(/(([A-Z0-9])([A-Z0-9][a-z]))|(([a-z])([A-Z]))/g,"$2$5-$3$6").toLowerCase()}="${i(this[e])}"`;var t}const{isArray:x}=Array,S=(_=new WeakMap,{get:e=>_.get(e),set:(e,t)=>(_.set(e,t),t)});var _;class A extends String{constructor(e){super(String(e)),this.is_uline=!0}}const v=(e,t,n)=>{const{length:s}=t,r=S.get(e)||S.set(e,((e,t,n)=>{const s=((e,t,n)=>{const s=[],{length:r}=e;for(let n=1;n<r;n++){const r=e[n-1];s.push(o.test(r)&&f(e,n)?r.replace(o,((e,s,r)=>`${t}${n-1}=${r||'"'}${s}${r?"":'"'}`)):`${r}\x3c!--${t}${n-1}--\x3e`)}s.push(e[r-1]);const i=s.join("").trim();return n?i:i.replace(l,$)})(e,d,n),r=[];let i=0,a=null;for(;a=m.exec(s);){const e=s.slice(i,a.index);if(i=a.index+a[0].length,a[2])r.push((t=>e+y(t)));else{const t=a[5],n=a[4];switch(!0){case"aria"===t:r.push((t=>e+b(t).map(k,t).join("")));break;case"data"===t:r.push((s=>"string"==typeof s?e+w(t,n,s):e+b(s).map(j,s).join("")));break;case"style"===t:r.push((s=>{let r=e;return"string"==typeof s&&(r+=w(t,n,s)),"object"==typeof s&&s.is_uline&&(r+=w(t,n,s.toString())),r}));break;case"."===t[0]:const s=t.slice(1).toLowerCase();r.push("dataset"===s?t=>e+b(t).map(j,t).join(""):t=>{let r=e;return null!=t&&!1!==t&&(r+=!0===t?` ${s}`:w(s,n,t)),r});break;case"on"===t.slice(0,2):r.push((s=>{let r=e;switch(typeof s){case"object":if(s.is_uline){r+=w(t,n,s.toString());break}if(!(t in s))break;if("function"!=typeof(s=s[t]))break;case"function":if(s.toString===g)break;case"string":r+=w(t,n,s)}return r}));break;default:r.push((s=>{let r=e;return null!=s&&(r+=w(t,n,s)),r}))}}}const{length:c}=r;if(c!==t)throw new Error(`invalid template ${e}`);if(c){const e=r[c-1],t=s.slice(i);r[c-1]=n=>e(n)+t}else r.push((()=>s));return r})(e,s,n));return s?t.map(M,r).join(""):r[0]()},z=(e,t)=>x(e)?((e,t)=>e[0]+t.map(E,e).join(""))(e,t):e,C=e=>(e.node=e,e.for=()=>e,e),L=C(((e,...t)=>new A(v(e,t,!1)))),Z=C(((e,...t)=>new A(v(e,t,!0))));function E(e,t){return e+this[t+1]}function M(e,t){return this[t](e)}e.css=(e,...t)=>new A(z(e,t)),e.html=L,e.raw=(e,...t)=>new A(z(e,t)),e.svg=Z,Object.defineProperty(e,"__esModule",{value:!0})}));
